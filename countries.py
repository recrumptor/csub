import urllib.parse

# ===== Ğ¤Ğ›ĞĞ“Ğ˜ Ğ”Ğ›Ğ¯ Ğ’Ğ«Ğ‘ĞĞ Ğ (ĞºĞ¾Ğ¿Ğ¸Ñ€ÑƒĞ¹ Ğ¾Ñ‚ÑÑĞ´Ğ° â†“) =====
# ğŸ‡·ğŸ‡º Ğ Ğ¾ÑÑĞ¸Ñ
# ğŸ‡¦ğŸ‡² ĞÑ€Ğ¼ĞµĞ½Ğ¸Ñ
# ğŸ‡©ğŸ‡ª Ğ“ĞµÑ€Ğ¼Ğ°Ğ½Ğ¸Ñ
# ğŸ‡ªğŸ‡ª Ğ­ÑÑ‚Ğ¾Ğ½Ğ¸Ñ
# ğŸ‡ªğŸ‡¸ Ğ˜ÑĞ¿Ğ°Ğ½Ğ¸Ñ
# ğŸ‡«ğŸ‡® Ğ¤Ğ¸Ğ½Ğ»ÑĞ½Ğ´Ğ¸Ñ
# ğŸ‡¬ğŸ‡§ Ğ’ĞµĞ»Ğ¸ĞºĞ¾Ğ±Ñ€Ğ¸Ñ‚Ğ°Ğ½Ğ¸Ñ
# ğŸ‡­ğŸ‡º Ğ’ĞµĞ½Ğ³Ñ€Ğ¸Ñ
# ğŸ‡®ğŸ‡³ Ğ˜Ğ½Ğ´Ğ¸Ñ
# ğŸ‡®ğŸ‡¹ Ğ˜Ñ‚Ğ°Ğ»Ğ¸Ñ
# ğŸ‡°ğŸ‡¿ ĞšĞ°Ğ·Ğ°Ñ…ÑÑ‚Ğ°Ğ½
# ğŸ‡±ğŸ‡» Ğ›Ğ°Ñ‚Ğ²Ğ¸Ñ
# ğŸ‡±ğŸ‡¹ Ğ›Ğ¸Ñ‚Ğ²Ğ°
# ğŸ‡³ğŸ‡± ĞĞ¸Ğ´ĞµÑ€Ğ»Ğ°Ğ½Ğ´Ñ‹
# ğŸ‡³ğŸ‡´ ĞĞ¾Ñ€Ğ²ĞµĞ³Ğ¸Ñ
# ğŸ‡µğŸ‡± ĞŸĞ¾Ğ»ÑŒÑˆĞ°
# ğŸ‡¸ğŸ‡ª Ğ¨Ğ²ĞµÑ†Ğ¸Ñ
# ğŸ‡¹ğŸ‡· Ğ¢ÑƒÑ€Ñ†Ğ¸Ñ
# ğŸ‡ºğŸ‡¦ Ğ£ĞºÑ€Ğ°Ğ¸Ğ½Ğ°
# ğŸ‡ºğŸ‡¸ Ğ¡Ğ¨Ğ
# ============================================

ALLOWED_FLAGS = ['ğŸ‡·ğŸ‡º', 'ğŸ‡©ğŸ‡ª', 'ğŸ‡«ğŸ‡®', 'ğŸ‡³ğŸ‡±']

def filter_links(input_file, output_file):
    try:
        with open(input_file, 'r', encoding='utf-8') as file:
            links = file.readlines()

        filtered_links = []

        for link in links:
            link = link.strip()
            if '#' not in link:
                continue
                
            # Ğ Ğ°Ğ·Ğ´ĞµĞ»ÑĞµĞ¼: Ğ²ÑÑ‘, Ñ‡Ñ‚Ğ¾ Ğ´Ğ¾ # â€” ÑÑ‚Ğ¾ Ğ°Ğ´Ñ€ĞµÑ/ĞºĞ»ÑÑ‡Ğ¸, Ğ²ÑÑ‘, Ñ‡Ñ‚Ğ¾ Ğ¿Ğ¾ÑĞ»Ğµ â€” Ğ½Ğ°Ğ·Ğ²Ğ°Ğ½Ğ¸Ğµ
            # split('#', 1) Ğ´ĞµĞ»Ğ¸Ñ‚ ÑÑ‚Ñ€Ğ¾ĞºÑƒ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ¿Ğ¾ Ğ¿ĞµÑ€Ğ²Ğ¾Ğ¹ Ğ½Ğ°Ğ¹Ğ´ĞµĞ½Ğ½Ğ¾Ğ¹ Ñ€ĞµÑˆĞµÑ‚ĞºĞµ
            parts = link.split('#', 1)
            name_part = urllib.parse.unquote(parts[1]) # Ğ”ĞµĞºĞ¾Ğ´Ğ¸Ñ€ÑƒĞµĞ¼ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ½Ğ°Ğ·Ğ²Ğ°Ğ½Ğ¸Ğµ

            # ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑĞµĞ¼ Ñ„Ğ»Ğ°Ğ³ Ğ¢ĞĞ›Ğ¬ĞšĞ Ğ² Ğ½Ğ°Ğ·Ğ²Ğ°Ğ½Ğ¸Ğ¸
            if any(flag in name_part for flag in ALLOWED_FLAGS):
                filtered_links.append(link + '\n')

        with open(output_file, 'w', encoding='utf-8') as file:
            file.writelines(filtered_links)
        
        print(f"Ğ“Ğ¾Ñ‚Ğ¾Ğ²Ğ¾! ĞĞ°Ğ¹Ğ´ĞµĞ½Ğ¾ Ğ¿Ğ¾ Ğ½Ğ°Ğ·Ğ²Ğ°Ğ½Ğ¸Ñ: {len(filtered_links)}")
    
    except Exception as e:
        print(f"ĞÑˆĞ¸Ğ±ĞºĞ°: {e}")

if __name__ == "__main__":
    filter_links('cleaned_links.txt', 'filtered_links.txt')

